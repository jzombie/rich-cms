<!DOCTYPE html>
<html lang="en">
 <head>
  <meta content="no-cache, no-store, must-revalidate" http-equiv="Cache-Control"/>
  <meta content="no-cache" http-equiv="Pragma"/>
  <meta content="0" http-equiv="Expires"/>
  <meta charset="utf-8">
   <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>
     Avoid Python Dependency Hell When Creating New Packages
    </title>
    <link href="../styles/main.css" rel="stylesheet"/>
    <link href="../styles/pygments.css" rel="stylesheet"/>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet"/>
    <link href="../images/thinker.png" rel="icon" type="image/png"/>
    <script src="../scripts/main.js">
    </script>
    <meta content="https://github.com/jzombie/rich-cms" name="generator">
     <meta content="2024-11-05 17:57:06 +0000" name="build_datetime"/>
     <meta content="515" name="word_count"/>
     <script async="" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML">
     </script>
    </meta>
   </meta>
  </meta>
 </head>
 <body>
  <a class="no-css" href="#main-content">
   Skip to main content
  </a>
  <button aria-label="Toggle TOC" class="hamburger js-only" id="menu-toggle-button">
  </button>
  <aside>
   <header>
    <div class="page_title">
     Avoid Python Dependency Hell When Creating New Packages
    </div>
   </header>
   <nav class="toc">
    <ul>
     <li>
      <ul>
       <li>
        <a href="../index.html">
         Welcome to zenOSmosis
        </a>
       </li>
       <li>
        <a href="../Contact%20Me.html">
         Contact Me
        </a>
       </li>
       <li>
        <a href="../Disclaimer.html">
         Disclaimer
        </a>
       </li>
       <li>
        <a href="../Resume.html">
         Jeremy Harris' Resume
        </a>
       </li>
      </ul>
     </li>
     <li>
      <ul>
       <li class="directory">
        <div class="label">
         <a href="../1.%20Think%20and%20Grow%20Rich/index.html">
          1. Think and Grow Rich
         </a>
        </div>
        <ul>
         <li>
          <a href="../1.%20Think%20and%20Grow%20Rich/index.html">
           Copyright / General Info
          </a>
         </li>
         <li>
          <a href="../1.%20Think%20and%20Grow%20Rich/FOREWORD.html">
           FOREWORD: What Do You Want Most?
          </a>
         </li>
         <li>
          <a href="../1.%20Think%20and%20Grow%20Rich/Chapter%201.html">
           CHAPTER 1: Introduction
          </a>
         </li>
         <li>
          <a href="../1.%20Think%20and%20Grow%20Rich/Chapter%202.html">
           CHAPTER 2: Desire
          </a>
         </li>
         <li>
          <a href="../1.%20Think%20and%20Grow%20Rich/Chapter%203.html">
           CHAPTER 3: Faith
          </a>
         </li>
         <li>
          <a href="../1.%20Think%20and%20Grow%20Rich/Chapter%204.html">
           CHAPTER 4: Auto-Suggestion
          </a>
         </li>
         <li>
          <a href="../1.%20Think%20and%20Grow%20Rich/Chapter%205.html">
           CHAPTER 5: Specialized Knowledge
          </a>
         </li>
         <li>
          <a href="../1.%20Think%20and%20Grow%20Rich/Chapter%206.html">
           CHAPTER 6: Imagination
          </a>
         </li>
         <li>
          <a href="../1.%20Think%20and%20Grow%20Rich/Chapter%207.html">
           CHAPTER 7: Organized Planning
          </a>
         </li>
         <li>
          <a href="../1.%20Think%20and%20Grow%20Rich/Chapter%208.html">
           CHAPTER 8: Decision
          </a>
         </li>
         <li>
          <a href="../1.%20Think%20and%20Grow%20Rich/Chapter%209.html">
           CHAPTER 9: Persistence
          </a>
         </li>
         <li>
          <a href="../1.%20Think%20and%20Grow%20Rich/Chapter%2010.html">
           CHAPTER 10: Power of the Master Mind
          </a>
         </li>
         <li>
          <a href="../1.%20Think%20and%20Grow%20Rich/Chapter%2011.html">
           CHAPTER 11: The Mystery of Sex
          </a>
         </li>
         <li>
          <a href="../1.%20Think%20and%20Grow%20Rich/Chapter%2012.html">
           CHAPTER 12: The Subconscious Mind
          </a>
         </li>
         <li>
          <a href="../1.%20Think%20and%20Grow%20Rich/Chapter%2013.html">
           CHAPTER 13: The Brain
          </a>
         </li>
         <li>
          <a href="../1.%20Think%20and%20Grow%20Rich/Chapter%2014.html">
           CHAPTER 14: The Sixth Sense
          </a>
         </li>
         <li>
          <a href="../1.%20Think%20and%20Grow%20Rich/Chapter%2015.html">
           CHAPTER 15: How to Outwit the Six Ghosts of Fear
          </a>
         </li>
        </ul>
       </li>
       <li class="directory">
        <div class="label">
         <a href="../2.%20General%20Self-Improvement/12%20Laws%20of%20Karma.html">
          2. General Self-Improvement
         </a>
        </div>
        <ul>
         <li>
          <a href="../2.%20General%20Self-Improvement/12%20Laws%20of%20Karma.html">
           12 Laws of Karma
          </a>
         </li>
         <li>
          <a href="../2.%20General%20Self-Improvement/12%20Steps%20for%20Self%20Care.html">
           12 Steps for Self Care
          </a>
         </li>
         <li>
          <a href="../2.%20General%20Self-Improvement/Advice%20from%20Self-Made%20Millionaires.html">
           Advice from Self-Made Millionaires
          </a>
         </li>
         <li>
          <a href="../2.%20General%20Self-Improvement/Biggest%20Mistake.html">
           Biggest Mistake You Can Make
          </a>
         </li>
         <li>
          <a href="../2.%20General%20Self-Improvement/By%20Age%2040.html">
           By Age 40 You Should be Smart Enough to Realize This
          </a>
         </li>
         <li>
          <a href="../2.%20General%20Self-Improvement/Feynman%20Did%20Not%20Burn%20Out.html">
           Feynman Didn't Burn Out
          </a>
         </li>
         <li>
          <a href="../2.%20General%20Self-Improvement/Fix%20Yourself.html">
           Fix Yourself
          </a>
         </li>
         <li>
          <a href="../2.%20General%20Self-Improvement/Rule%20of%206ths.html">
           Rule of 6ths
          </a>
         </li>
        </ul>
       </li>
       <li class="directory active-dir">
        <div class="label">
         <a href="A%20Tester%20Walks%20Into%20A%20Bar.html">
          3. Nerdy Stuff
         </a>
        </div>
        <ul>
         <li>
          <a href="A%20Tester%20Walks%20Into%20A%20Bar.html">
           A Tester Walks Into A Bar
          </a>
         </li>
         <li class="active">
          <a href="Avoid%20Python%20Dep%20Hell%20in%20New%20Packages.html">
           Avoid Python Dependency Hell When Creating New Packages
          </a>
         </li>
         <li>
          <a href="Debugging%20a%20Learning%20Algorithm.html">
           Debugging a Learning Algorithm
          </a>
         </li>
         <li>
          <a href="Engineering%20Blogs.html">
           Engineering Blogs
          </a>
         </li>
         <li>
          <a href="Formatting%20Test.html">
           Formatting Test
          </a>
         </li>
         <li>
          <a href="Free%20P2P%20Services.html">
           Free P2P Services
          </a>
         </li>
         <li>
          <a href="Generating%20Synthetic%20Data%20from%20a%20Pandas%20Dataframe.html">
           Generating Synthetic Data from a Pandas DataFrame
          </a>
         </li>
         <li>
          <a href="Hacker%20News%20API.html">
           Hacker News API
          </a>
         </li>
         <li>
          <a href="History%20of%20Doctype%20Declarations.html">
           History of Doctype Declarations
          </a>
         </li>
         <li>
          <a href="How%20to%20Resize%20Images%20Using%20ImageMagick%20on%20Linux.html">
           How to Resize Images Using ImageMagick on Linux
          </a>
         </li>
         <li>
          <a href="How%20to%20Use%20SVGR%20with%20Vite%20to%20Import%20SVGs%20as%20React%20Components.html">
           How to Use SVGR with Vite to Import SVGs as React Components
          </a>
         </li>
         <li>
          <a href="Implementing%20Full-Text%20Search.html">
           Implementing Full-Text Search (in a static HTML website)
          </a>
         </li>
         <li>
          <a href="Mixture%20of%20Experts:%20How%20to%20Properly%20Scale%20LLMs.html">
           Mixture of Experts: How to Properly Scale LLMs
          </a>
         </li>
         <li>
          <a href="Python%20via%20WASM.html">
           Python via WASM
          </a>
         </li>
         <li>
          <a href="Restart%20VNC%20Server%20on%20macOS.html">
           Restart VNC Server on macOS
          </a>
         </li>
         <li>
          <a href="Rsync%20over%20SSH%20Examples.html">
           Rsync over SSH Examples
          </a>
         </li>
         <li>
          <a href="SSH%20Keygen.html">
           SSH Keygen for Password-less Server Login
          </a>
         </li>
         <li>
          <a href="Setting%20Ubuntu%20Swap%20File.html">
           Setting Ubuntu Swap File
          </a>
         </li>
         <li>
          <a href="Setting%20Up%20CUPS%20Network%20Printer%20on%20Ubuntu.html">
           Setting Up CUPS Network Printer on Ubuntu
          </a>
         </li>
         <li>
          <a href="Using%20Git%20for%20File%20Metadata.html">
           Using Git for File Metadata (in regards to create and update)
          </a>
         </li>
         <li>
          <a href="Utilities.html">
           Utilities
          </a>
         </li>
        </ul>
       </li>
       <li class="directory">
        <div class="label">
         <a href="../4.%20Uncategorized/8%20Daily%20Routines%20to%20Dominate%20the%20Market.html">
          4. Uncategorized
         </a>
        </div>
        <ul>
         <li>
          <a href="../4.%20Uncategorized/8%20Daily%20Routines%20to%20Dominate%20the%20Market.html">
           8 Daily Routines to Dominate the Market
          </a>
         </li>
         <li>
          <a href="../4.%20Uncategorized/Buffett%20on%20Finding%20Intrinsic%20Value.html">
           Buffett on Finding Intrinsic Value
          </a>
         </li>
         <li>
          <a href="../4.%20Uncategorized/Letter%20from%20Lego.html">
           Letter from Lego
          </a>
         </li>
         <li>
          <a href="../4.%20Uncategorized/Links%20of%20Interest.html">
           Links of Interest
          </a>
         </li>
         <li>
          <a href="../4.%20Uncategorized/Lyrics%20to%20an%20Unknown%20Song.html">
           Lyrics to an Unknown Song
          </a>
         </li>
         <li>
          <a href="../4.%20Uncategorized/Quotes.html">
           Quotes
          </a>
         </li>
         <li>
          <a href="../4.%20Uncategorized/Stop%20Spending%20Huge%20Amounts%20of%20Money%20on%20Online%20Courses%20Forever.html">
           Stop Spending Huge Amounts of Money on Online Courses Forever
          </a>
         </li>
         <li>
          <a href="../4.%20Uncategorized/TODOs.html">
           TODOs
          </a>
         </li>
         <li>
          <a href="../4.%20Uncategorized/Think%20and%20TRADE%20Rich.html">
           Think and TRADE Rich
          </a>
         </li>
         <li>
          <a href="../4.%20Uncategorized/Tigo%20Service%20Numbers.html">
           Tigo Service Numbers and Their Meanings
          </a>
         </li>
         <li>
          <a href="../4.%20Uncategorized/Warren%20Buffet%27s%20Ten%20Rules.html">
           Warren Buffett's Ten Rules
          </a>
         </li>
         <li>
          <a href="../4.%20Uncategorized/Why%20I%27m%20Switching%20from%20Evernote%20to%20Markdown.html">
           Why I'm Switching from Evernote to Markdown
          </a>
         </li>
        </ul>
       </li>
      </ul>
     </li>
    </ul>
   </nav>
   <footer>
    <nav>
     <a class="previous" href="A%20Tester%20Walks%20Into%20A%20Bar.html">
      « Previous
     </a>
     <a class="next" href="Debugging%20a%20Learning%20Algorithm.html">
      Next »
     </a>
    </nav>
   </footer>
  </aside>
  <article id="main-content">
   <nav>
    <a href="../index.html">
     Home
    </a>
    &gt;
    <a href="../3.%20Nerdy%20Stuff/A%20Tester%20Walks%20Into%20A%20Bar.html">
     3. Nerdy Stuff
    </a>
    &gt; Avoid Python Dependency Hell When Creating New Packages
   </nav>
   <p>
    Estimated reading time: 3 minute(s).
   </p>
   <div>
    <h1 id="avoid-python-dependency-hell-when-creating-new-packages">
     Avoid Python Dependency Hell When Creating New Packages
    </h1>
    <h2 id="example-scenario-using-pydantic-as-a-dependency-in-a-package">
     Example Scenario: Using Pydantic as a dependency in a package
    </h2>
    <p class="has-drop-cap">
     When developing a Python package that depends on Pydantic, or any other library, and aiming to minimize dependency issues for users, there are several best practices you can follow to reduce the likelihood of creating or exacerbating dependency conflicts. Here’s a comprehensive guide:
    </p>
    <h3 id="1-specify-dependency-versions-carefully">
     1.
     <strong>
      Specify Dependency Versions Carefully
     </strong>
    </h3>
    <p>
     Use version specifiers to manage dependencies in a way that balances the need for specific functionality and stability with the flexibility required by other packages that might use yours. A few common strategies are:
    </p>
    <ul>
     <li>
      <p>
       <strong>
        Pinning Specific Versions
       </strong>
       : Avoid unless necessary, as it forces users into specific versions, potentially causing conflicts.
      </p>
     </li>
     <li>
      <p>
       <strong>
        Compatible Release
       </strong>
       : Use the tilde operator (
       <code>
        ~=
       </code>
       ) to specify compatible releases. For example,
       <code>
        pydantic~=1.8
       </code>
       will allow any version &gt;=1.8.0 and &lt;2.0.0. This ensures you get bug fixes and minor updates without breaking backward compatibility.
      </p>
     </li>
     <li>
      <p>
       <strong>
        Minimum Version
       </strong>
       : Specify a minimum version that you know supports all the features your package needs, for example,
       <code>
        pydantic&gt;=1.8
       </code>
       . This allows greater flexibility but risks future backward compatibility breaks.
      </p>
     </li>
     <li>
      <p>
       <strong>
        Maximum Version
       </strong>
       : Sometimes, especially when aware of upcoming changes that might break your package, specifying a maximum version can be useful. Combine this with a minimum version like
       <code>
        pydantic&gt;=1.8,&lt;2.0
       </code>
       .
      </p>
     </li>
    </ul>
    <p>
     Here’s how you might specify these in your
     <code>
      <a href="http://setup.py" rel="noopener noreferrer" target="_blank">
       setup.py
      </a>
     </code>
     or
     <code>
      pyproject.toml
     </code>
     :
    </p>
    <pre><code class="language-python"># <a href="http://setup.py" rel="noopener noreferrer" target="_blank">setup.py</a> example
install_requires=[
    'pydantic&gt;=1.8,&lt;2.0'
]
</code></pre>
    <pre><code class="language-toml"># pyproject.toml example
[tool.poetry.dependencies]
pydantic = "^1.8"
</code></pre>
    <h3 id="2-regularly-update-your-dependencies">
     2.
     <strong>
      Regularly Update Your Dependencies
     </strong>
    </h3>
    <ul>
     <li>
      <p>
       <strong>
        Stay Updated
       </strong>
       : Keep track of new releases of your dependencies. Update the versions you rely on after testing to ensure they don't break your package. This can help you catch and fix compatibility issues early.
      </p>
     </li>
     <li>
      <p>
       <strong>
        Use Dependency Bots
       </strong>
       : Tools like Dependabot can automatically create pull requests to update dependencies in your project, helping you keep your package up-to-date.
      </p>
     </li>
    </ul>
    <h3 id="3-testing-against-multiple-dependency-versions">
     3.
     <strong>
      Testing Against Multiple Dependency Versions
     </strong>
    </h3>
    <ul>
     <li>
      <p>
       <strong>
        Test Matrix
       </strong>
       : Use CI/CD tools like GitHub Actions, GitLab CI, or Travis CI to test your package against multiple versions of its dependencies. This helps ensure that your package works as expected across the range of allowed versions.
      </p>
     </li>
     <li>
      <p>
       <strong>
        tox
       </strong>
       : Use
       <code>
        tox
       </code>
       to automate testing across multiple environments and dependency versions.
      </p>
     </li>
    </ul>
    <p>
     Here’s an example
     <code>
      tox.ini
     </code>
     configuration that tests multiple Pydantic versions:
    </p>
    <pre><code class="language-ini">[tox]
envlist = py{36,37,38,39}-pydantic{1.8,1.9}

[testenv]
deps =
    pydantic1.8: pydantic&gt;=1.8,&lt;1.9
    pydantic1.9: pydantic&gt;=1.9,&lt;2.0
commands =
    pytest tests/
</code></pre>
    <h3 id="4-documentation">
     4.
     <strong>
      Documentation
     </strong>
    </h3>
    <ul>
     <li>
      <p>
       <strong>
        Guidelines
       </strong>
       : Provide clear documentation on how to install and configure your package, including notes about compatibility with common dependency versions.
      </p>
     </li>
     <li>
      <p>
       <strong>
        Changelog
       </strong>
       : Maintain a changelog to help users understand what changes have been made in each version, especially changes related to dependencies.
      </p>
     </li>
    </ul>
    <h3 id="5-isolate-your-package-environment">
     5.
     <strong>
      Isolate Your Package Environment
     </strong>
    </h3>
    <ul>
     <li>
      <strong>
       Virtual Environments
      </strong>
      : Recommend that end users install your package within a virtual environment to avoid interfering with system-wide packages.
     </li>
    </ul>
    <h3 id="6-provide-an-escape-hatch">
     6.
     <strong>
      Provide an Escape Hatch
     </strong>
    </h3>
    <ul>
     <li>
      <strong>
       Extras
      </strong>
      : Allow users to opt out of installing certain dependencies if they conflict with other packages. This can be managed with optional dependencies.
     </li>
    </ul>
    <p>
     Using these strategies, you can help minimize dependency conflicts and provide a more robust and user-friendly Python package.
    </p>
   </div>
   <footer>
    <div class="build_datetime">
     Build datetime: 2024-11-05 17:57:06 +0000
    </div>
    <nav>
     <a class="previous" href="A%20Tester%20Walks%20Into%20A%20Bar.html">
      « Previous
     </a>
     <a class="next" href="Debugging%20a%20Learning%20Algorithm.html">
      Next »
     </a>
    </nav>
   </footer>
  </article>
 </body>
</html>
